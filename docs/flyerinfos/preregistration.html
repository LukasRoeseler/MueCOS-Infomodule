<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Preregistrations: All you need to know – Open Science Infomodule</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Open Science Infomodule</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../fächerübergreifend.html"> 
<span class="menu-text">Fächerübergreifende Informationen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../quantitativ.html"> 
<span class="menu-text">Quantitative Forschung</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../themen.html"> 
<span class="menu-text">Themen und Ansprechpersonen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">Über die Infomodule</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/LukasRoeseler/MueCOS-Infomodule" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <div id="quarto-announcement" data-announcement-id="3aff8b9c3bbcde43abd25d2297d9e56f" class="alert alert-primary hidden"><i class="bi bi-info-circle quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p><strong>Achtung</strong> - Diese Seite befindet sich im Aufbau und ist noch unvollständig.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-problem-garden-of-forking-paths" id="toc-the-problem-garden-of-forking-paths" class="nav-link active" data-scroll-target="#the-problem-garden-of-forking-paths">The Problem: Garden of Forking Paths</a></li>
  <li><a href="#myths-of-preregistrations" id="toc-myths-of-preregistrations" class="nav-link" data-scroll-target="#myths-of-preregistrations">Myths of Preregistrations</a></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best Practices</a></li>
  <li><a href="#where-to-preregister" id="toc-where-to-preregister" class="nav-link" data-scroll-target="#where-to-preregister">Where to preregister?</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><strong>Further reading</strong></a></li>
  <li><a href="#workshops-and-materials" id="toc-workshops-and-materials" class="nav-link" data-scroll-target="#workshops-and-materials"><strong>Workshops and Materials</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Preregistrations: All you need to know</h1>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>This is a narrative summary of the most important Preregistration infos for researchers. It is part of the <a href="https://www.uni-muenster.de/MueCOS/en/index.html">Münster Center for Open Science</a>’s info materials.</em></p>
<ul>
<li><p><em>Preregistration flyer</em></p></li>
<li><p><em>Preregistration cheat sheet</em></p></li>
</ul>
</div>
</div>
<p>More and more researchers in the social, behavioral and cognitive sciences are required to preregister their studies or choose to do so to increase transparency and robustness. The MüCOS offers advice on how to preregister, such as workshops and this brief guide since preregistrations have multiple advantages and almost no disadvantage:</p>
<ul>
<li><p>Clarify what was planned and predicted</p></li>
<li><p>Improve credibility and replicability</p></li>
<li><p>Establish intellectual ownership</p></li>
<li><p>Receive guidance for empirical studies</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://forrt.org/glossary/english/preregistration"><strong>FORRT Glossary Definition of Preregistration</strong></a>(Parsons et al., 2022):</p>
<ul>
<li><p><strong>The practice of publishing the plan for a study, including research questions/hypotheses, research design, data analysis before the data has been collected or examined.</strong></p></li>
<li><p>[…] A preregistration document is time-stamped and typically registered with an independent party (e.g., a repository) so that it can be publicly shared with others (possibly after an embargo period).</p></li>
<li><p>Preregistration provides a transparent documentation of what was planned at a certain time point, and allows third parties to assess what changes may have occurred afterwards. The more detailed a preregistration is, the better third parties can assess these changes and with that the validity of the performed analyses.</p></li>
<li><p>Preregistration aims to clearly distinguish confirmatory from exploratory research.</p></li>
</ul>
</div>
</div>
<section id="the-problem-garden-of-forking-paths" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-garden-of-forking-paths">The Problem: Garden of Forking Paths</h2>
<p>A common metaphor used to explain preregistration is the “garden of forking paths.” This metaphor relates to the research process, or more specifically, to the journey researchers take from <em>raw data</em> to the <em>final results</em>. This journey is not a straight line, but rather a path filled with many decisions. For many of these decisions, there is no clear “right” or “wrong” but several routes are possible. At the same time, different paths often lead to different outcomes. The purpose of preregistration is not to find the perfect path, but to <strong>plan a reasonable and justifiable path in advance</strong>. The choice of this path should be based on considerations that are independent of the observed results. In other words, preregistration helps researchers avoid choosing the analytical route that simply suits them best after seeing the data.</p>
<p>Flexibility in choice of analyses is suspected to be one of the many intertwined reasons for <strong>low rates of replication and reproduction success</strong> across sciences (see the <a href="https://en.wikipedia.org/wiki/Replication_crisis#Prevalence">Wikipedia article</a> for prevalence in Psychology, Medicine, Economics, etc.)</p>
</section>
<section id="myths-of-preregistrations" class="level2">
<h2 class="anchored" data-anchor-id="myths-of-preregistrations">Myths of Preregistrations</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Myths</th>
<th>Facts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ps are laborious.</td>
<td>If done correctly, Ps can save work because only one analysis is conducted.</td>
</tr>
<tr class="even">
<td>Ps allow scooping from other researchers.</td>
<td>Researchers can embargo their Ps for multiple years if they do not wish to share their plans before publication. Every P is timestamped and you should assign it a license (e.g., CC-BY).</td>
</tr>
<tr class="odd">
<td>Ps prohibit researchers from conducting exploratory analyses and restrict creativity.</td>
<td>Ps allow a clear distinction between what parts of the research are confirmatory and what parts are exploratory.</td>
</tr>
<tr class="even">
<td>Journals do not value Ps.</td>
<td>As of February 2025, <a href="topfactor.org/journals?factor=Study+Preregistration">125 journals</a> require authors to disclose whether the study they report was preregistered. Check your journal’s guidelines for authors.</td>
</tr>
</tbody>
</table>
</section>
<section id="best-practices" class="level2">
<h2 class="anchored" data-anchor-id="best-practices">Best Practices</h2>
<ul>
<li><p><strong>Comprehensiveness</strong>: Try to plan every detail of the study that, if decided upon later, can affect the results. Choose between <a href="https://osf.io/7xrn9">over 20 templates</a> for guidance in what to determine. Ideally, finish your study’s analysis script (e.g., R or Python script, SPSS syntax) and attach the file to the preregistration.</p></li>
<li><p><strong>Structure</strong>: To facilitate review of the preregistration or comparison between planned and conducted analyses, you can use a template. There are <a href="https://osf.io/7xrn9">over 20 templates</a> for many types of studies. They can also guide you in planning (e.g., suggest parts of the research design that you need to consider).</p></li>
<li><p><strong>Transparency</strong>: Be as transparent as possible with respect to your plans. If needed, create an anonymized view-only link for blind peer review. Make the preregistration publicly accessible at the moment of publication or earlier and link to it from the corresponding research article.</p></li>
<li><p><strong>Updates:</strong> If you notice necessary changes before starting data collection, you can update the preregistration. If data collection is already underway or you are using secondary data, you can simply deviate.</p></li>
<li><p><strong>Deviations</strong>: Difficult to see the future is. In up to 90% of all studies, there will be at least one deviation. You should discuss all deviations from the preregistration in three respects: <strong>How did you deviate</strong> (e.g., corrected a coding error)? <strong>Why did you deviate</strong> (e.g., preregistered code did not run)? <strong>How did it affect the results</strong> (allowed to run the code)? This also applies to cases where you had not not specified anything.</p></li>
</ul>
</section>
<section id="where-to-preregister" class="level2">
<h2 class="anchored" data-anchor-id="where-to-preregister">Where to preregister?</h2>
<ul>
<li><p><a href="https://osf.io/registries">OSF Registries</a>: Comes with several templates, allows linking to articles posted on many preprint repositories, open source software, maintained by the non-profit Center for Open Science</p></li>
<li><p><a href="https://prereg-psych.org">ZPID PreReg Service</a>: Primarily for psychological research and maintained by the Leibniz Institute for Psychology.</p></li>
<li><p><a href="https://aspredicted.org">Aspredicted.org</a> [not recommended]: Fixed template with too few questions, maintained by researchers from the US University of Pennsylvania</p></li>
</ul>
<p>Further services such as <a href="https://www.crd.york.ac.uk/prospero">Prospero</a>, the <a href="https://www.bfarm.de/DE/Das-BfArM/Aufgaben/Deutsches-Register-Klinischer-Studien/_node.html">German Clinical Trials Register (DRKS)</a> or <a href="https://clinicaltrials.gov">ClinicalTrials.gov</a> primarily serve other services but can serve as preregistration platforms as well.</p>
<p><strong>FAQs</strong></p>
<p><strong>Q: What should I do if a reviewer asks me to deviate from my preregistration?</strong><br>
A: If they provide a good reason, make the change but clearly discuss the deviation and check whether it leads to different results.</p>
<p><strong>Q: What should I do if I want to publish a study that was not preregistered?</strong><br>
A: Conduct another preregistered study or compensate for the missing preregistration by increasing transparency.</p>
<p><strong>Q: Are there other ways to know if I can trust a finding besides checking whether it was preregistered?</strong><br>
A: Yes; you can use p-curve analysis, check if unusually many results are significant, consider plausibility of effect sizes, analyze available data, look for unpublished replications, and more.</p>
<p><strong>Q: What if I get null results and cannot tweak my results so they are significant and publishable?</strong><br>
A: Tweaking results (also known as p-hacking) is a questionable research practices that you should never apply. There are journals that publish good research regardless of results, some even use results-blind peer review, and you can submit as a registered report if you expect a null finding. In these cases, beware of predatory publishers and commercial open access journals (<a href="https://lukasroeseler.github.io/MueCOS-Infomodule/flyerinfos/openaccess.html">see also Open Access infos</a>).</p>
<p><strong>Q: Can I still do exploratory analyses?</strong><br>
A: Yes, just make sure to clearly label which analyses are confirmatory and which are exploratory.</p>
<p><strong>Q: Can other people steal my idea by browsing preregistrations?</strong><br>
A: First, you can put your preregistration under embargo and release it when you choose (consider that it may benefit science if others replicate or build on your idea). Second, you can assign a license to your preregistration which requires others to cite it (e.g., CC-BY).</p>
<p><strong>Q: What should I do if my co-authors object to preregistering our study?</strong><br>
A: Discuss their reasons and concerns. If they insist on using questionable research practices, reconsidedr the collaboration.</p>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading"><strong>Further reading</strong></h2>
<ul>
<li><p>Brodeur, A., Cook, N. M., Hartley, J. S., &amp; Heyes, A. (2024). Do Preregistration and Preanalysis Plans Reduce p-Hacking and Publication Bias? Evidence from 15,992 Test Statistics and Suggestions for Improvement.&nbsp;<em>Journal of Political Economy Microeconomics</em>,&nbsp;<em>2</em>(3), 527-561. <a href="https://doi.org/10.1086/730455" class="uri">https://doi.org/10.1086/730455</a></p></li>
<li><p>Mellor, D. T. (2017, September 23). Preregistration and increased transparency will benefit science. <a href="http://doi.org/10.20316/ESE.2017.43.018" class="uri">http://doi.org/10.20316/ESE.2017.43.018</a></p></li>
<li><p>Nosek, B. A., Ebersole, C. R., DeHaven, A. C., &amp; Mellor, D. T. (2017, August 24). The preregistration revolution. Retrieved from <a href="http://osf.io/2dxu5">osf.io/2dxu5</a></p></li>
<li><p>Nosek, B. A., &amp; Lakens, D. (2016, August 15). Registered reports: A method to increase the credibility of published reports. Retrieved from <a href="http://psyarxiv.com/mgxyg">psyarxiv.com/mgxyg</a></p></li>
<li><p>Parsons, S., Azevedo, F., Elsherif, M. M., Guay, S., Shahim, O. N., Govaart, G. H., … &amp; Aczel, B. (2022). A Community-Sourced Glossary of Open Scholarship Terms.&nbsp;<em>Nature Human Behaviour, 6</em>(3), 312-318.&nbsp;<a href="https://doi.org/10.1038/s41562-021-01269-4" class="uri">https://doi.org/10.1038/s41562-021-01269-4</a></p></li>
<li><p>Simmons, J. P., Nelson, L. D., &amp; Simonsohn, U. (2021). Pre‐registration is a game changer. But, like random assignment, it is neither necessary nor sufficient for credible science. <em>Journal of Consumer Psychology</em>, <em>31</em>(1), 177-180. <a href="http://dx.doi.org/10.1002/jcpy.1207" class="uri">http://dx.doi.org/10.1002/jcpy.1207</a></p></li>
<li><p>Soderberg, C. K., Errington, T. M., Schiavone, S. R., Bottesini, J., Thorn, F. S., Vazire, S., … &amp; Nosek, B. A. (2021). Initial evidence of research quality of registered reports compared with the standard publishing model.&nbsp;<em>Nature Human Behaviour</em>,&nbsp;<em>5</em>(8), 990-997. <a href="https://doi.org/10.1038/s41562-021-01142-4" class="uri">https://doi.org/10.1038/s41562-021-01142-4</a></p></li>
</ul>
</section>
<section id="workshops-and-materials" class="level2">
<h2 class="anchored" data-anchor-id="workshops-and-materials"><strong>Workshops and Materials</strong></h2>
<ul>
<li><p>MüCOS/CERes Workshop on Preregistration: <a href="https://osf.io/64teq" class="uri">https://osf.io/64teq</a></p></li>
<li><p>90 minutes preregistration workshop: <a href="https://www.youtube.com/watch?v=EnKkGO3OM9c" class="uri">https://www.youtube.com/watch?v=EnKkGO3OM9c</a></p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Münster Center for Open Science</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Mit <a href="https://quarto.org/">Quarto</a> erstellt</p>
</div>
  </div>
</footer>




</body></html>